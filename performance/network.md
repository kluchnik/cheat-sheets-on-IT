# Проверка производительности сетевых устройств

## Системы на базе одного центрального поцессора
* Ограничение производительности из-за общего вычеслительного ресурса, при этом рост тактовой частоты одного процессора ограничено, при использовании многопроцессорных решений необходимо учитывать возможность корректного распределения задач между ними
* Высокие задержки при обработки сетевых пакетов, поскольку пакеты обрабатываются в порядке живой очереди на процессоре и сетевой карте

## Алгоритм тестирования
* Длительность тестирования – не менее 1000 секунд
* Порог потерь 0%
* Двунаправленный поток
* Не менее 100 клиентов с каждой стороны
* Не менее 10 серверов с каждой стороны

## Инструменты для генерации трафика
* Средство для тестирования Ixia BreakingPoint

## Способы тестирования производительности
* Cинтетика RFC 2544
* Трафик по TCP-протоколу
* EMIX
* Реальный трафик

## RFC 2544
| Протокол | Размер пакета, байт | Комментарий |
| - | - | - |
| IP/UDP | 1460 | Стандартный максимальный сетевой пакет |
| IP/UDP | 1024 | Возрастание количество сетевых пакетов |
| IP/UDP | 64 | Огромное количество сетевых пакетво которые необходимо коммутировать, из-за этого пропускная способность системы мжет упасть на 80-90% |

## Трафик по TCP-протоколу
В качестве примера трафика можно использовать протокол http.  
Для TCP-протокола характерны следующие зарактеристики:
* Количество новых соединений в секунду
* Количество одновременных сессий

## Характеристики реального трафика
| Приложение | Процент от полосы пропускания |
| - | - |
| HTTPS | 17,12 |
| HTTP audio, video, text, bandwith | 19,81 |
| Facebook | 16,98 |
| Amazon S3 | 10,94 |
| Bittorent | 8,84 |
| Yahoo Mail | 5,47 |
| FTP | 4,72 |
| Gmail | 3,96 |
| AOL Chat | 3,28 |
| Twitter | 2,92 |
| SMTP | 2,73 |
| Raw | 2,26 |
| SSH | 0,57 |
| Oracle | 0,35 |
| Youtube | 0,05 |

| Размер пакета, байт | Процент от полосы пропускания |
| - | - |
| 1024-1460 | 35 |
| 512-1023 | 9 |
| 256-511 | 1 |
| 128-255 | 1 |
| 64-127 | 53 |

## Количество обрабатываемых кадров в секунду
| Трафик | Скорость, Мбит/с | кадров в секунду | Задержки, мкс |
| - | - | - | -|
| UDP, Пакеты размером 1460 байт | 19 260 | 1 686 000 | 60,4 |
| UDP, Пакеты размером 1024 байта | 18 900 | 2 275 000 | 47,1 |
| UDP, Пакеты размером 64 байта | 6 278 | 11 962 000 | 14,9 |
| TCP, передача файла по HTTP | 18 210 | 1 733 820 | 62,4 |
| TCP, Weal world mix | 14 230 | 2 587 900 | 57,3 |
